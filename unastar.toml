# Unastar Server Configuration (TOML)
#
# This file is intentionally verbose and friendly: most fields are optional and
# have safe defaults. Start by changing `server.bind_address` and `spawn_rules`.
#
# Notes:
# - `[[spawn_rules]]` rules are evaluated top-to-bottom. The first rule that produces
#   a spawn location wins.
# - `previous_position = true` uses `players.data_dir` to load a per-player file.
#   If a player has never joined before (or has no UUID), it falls back.

[server]
# Address to bind the Bedrock listener to.
bind_address = "0.0.0.0:19132"

# Shown in server list (if/when advertisement is implemented).
motd = "Unastar Server"

# Soft maximum: connection acceptance still depends on upstream layers.
max_players = 2000

# Default gamemode for new players
default_gamemode = "creative"

# Chunk radius we will *advertise* to clients and stream.
# (Clients may request a different radius; we clamp it by `max_chunk_radius`.)
default_chunk_radius = 4
max_chunk_radius = 16

# Authentication settings
# Xbox Live authentication. Set to false for offline/cracked clients.
online_mode = false
# Allow legacy JWT chains (self-signed/guest). Required for stress testing.
allow_legacy_auth = true
# Enable encryption handshake. Set to false for debugging.
encryption_enabled = true

[world]
# Dimension ID: 0 = Overworld, 1 = Nether, 2 = End
dimension = 0

# Storage provider: "level_db" (default, Bedrock-compatible) or "blaze_db" (high-performance)
storage_provider = "blaze_db"

# BlazeDB cache size in chunks (only used if storage_provider = "blaze_db")
blazedb_cache_chunks = 4096

[world.bounds]
# Bounds are applied to *terrain generation* (non-air). Chunks outside bounds
# still exist as all-air so the Bedrock client can mesh borders correctly.
#
# modes: "infinite" | "radius" | "rect"
mode = "infinite"
# radius_chunks = 256
# min_x = -64
# max_x = 64
# min_z = -64
# max_z = 64

[world.generator]
# kinds: "super_flat" | "void_spawn_platform" | "vanilla"
kind = "super_flat"
seed = 12345

[players]
# Where Unastar stores per-player files (e.g. last known position).
data_dir = "playerdata"

# If true, Unastar writes a player's last known position on disconnect.
save_previous_position = true

# Spawn rules.
#
# Common patterns:
# - Always spawn at a fixed location:
#     always_at_location = true
#     location = { x = 0.5, y = 17.0, z = 0.5, yaw = 0.0, pitch = 0.0 }
#
# - Prefer previous position, fallback to fixed spawn:
#     previous_position = true
#     always_at_location = true
#     location = { ... }

[[spawn_rules]]
name = "main"

# If true, try to place returning players at their last saved position.
previous_position = true

# If true, force a fixed spawn location (or act as a fallback if previous position is missing).
always_at_location = true

# Spawn location in *block coordinates* (floats allowed for smoother centering).
# `yaw` and `pitch` are optional.
location = { x = 0.5, y = 17.0, z = 0.5, yaw = 0.0, pitch = 0.0 }
